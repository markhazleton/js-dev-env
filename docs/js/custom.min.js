console.log("External song-detail.js loaded!"),(()=>{function e(){let r=document.getElementById("loading-container"),t=document.getElementById("error-container"),i=document.getElementById("song-container"),n=document.getElementById("error-message");var e=window.location.pathname.split("/");let o=e[e.length-1];console.log("Song ID from URL:",o),fetch("/api/song/"+o).then(e=>{if(console.log("API Response status:",e.status),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(e=>{if(console.log("Song data received:",e),e.error)throw new Error(e.error);document.getElementById("rank-number").textContent=e.rank||"N/A",document.getElementById("song-title").textContent=e.title||"Unknown Title",document.getElementById("channel-name").textContent=e.channel||"Unknown Channel",document.getElementById("song-views").textContent=e.views||"N/A",document.getElementById("song-duration").textContent=e.duration||"N/A",document.getElementById("song-followers").textContent=e.followers||"N/A",document.getElementById("views-large").textContent=e.views||"N/A",document.getElementById("duration-large").textContent=e.duration||"N/A",document.getElementById("followers-large").textContent=e.followers||"N/A",document.getElementById("song-full-title").textContent=e.title||"Unknown Title",document.getElementById("category-badge").textContent=e.category||"Music",e.channelUrl?(document.getElementById("channel-link").href=e.channelUrl,document.getElementById("channel-url-container").classList.remove("d-none")):document.getElementById("channel-url-container").classList.add("d-none");{var t=e.description;let o=document.getElementById("song-description"),r=document.getElementById("toggle-description");if(t){let n=(e=>e.replace(/https?:\/\/[^\s\n]+/g,function(e){return`<a href="${e}" target="_blank" class="text-primary text-decoration-none">${e} <i class="bi bi-box-arrow-up-right small"></i></a>`}).replace(/\n/g,"<br>"))(t);if(500<n.length){let e=n.substring(0,500)+"...",t=(o.innerHTML=e,r.classList.remove("d-none"),!1);r.onclick=function(){t?(o.innerHTML=e,r.innerHTML='<i class="bi bi-chevron-down me-1"></i>Show More'):(o.innerHTML=n,r.innerHTML='<i class="bi bi-chevron-up me-1"></i>Show Less'),t=!t}}else o.innerHTML=n}else document.getElementById("description-card").classList.add("d-none")}var t=e.tags,n=document.getElementById("song-tags"),o=(!t||0===(t=t.split(",").map(e=>e.trim()).filter(e=>e)).length?document.getElementById("tags-card").classList.add("d-none"):n.innerHTML=t.map(e=>`<span class="badge bg-light text-dark border">${e}</span>`).join(""),parseInt(e.rank)||1),n=document.getElementById("prev-song"),t=document.getElementById("next-song");1<o?n.onclick=()=>window.location.href="/song/"+(o-1):n.disabled=!0,o<100?t.onclick=()=>window.location.href="/song/"+(o+1):t.disabled=!0,document.title=`${e.title||"Unknown"} - ${e.channel||"Unknown"} | Song Details`,r.classList.add("d-none"),i.classList.remove("d-none")}).catch(e=>{console.error("Error loading song:",e),e=e.message||"Failed to load song details",r.classList.add("d-none"),n.textContent=e,t.classList.remove("d-none")})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("theme-demo-toggle");t&&(e=document.documentElement.getAttribute("data-bs-theme"),t.textContent="dark"===e?"Try Light Mode":"Try Dark Mode",t.addEventListener("click",function(){var e=document.documentElement,t="dark"===e.getAttribute("data-bs-theme")?"light":"dark";e.setAttribute("data-bs-theme",t),this.textContent="dark"==t?"Try Light Mode":"Try Dark Mode"}))}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("darkModeToggle"),n=document.documentElement;let o=e=>{"dark"===e?(n.setAttribute("data-bs-theme","dark"),t&&(t.checked=!0,t.nextElementSibling.innerHTML='<i class="bi bi-moon-fill"></i>')):(n.setAttribute("data-bs-theme","light"),t&&(t.checked=!1,t.nextElementSibling.innerHTML='<i class="bi bi-sun-fill"></i>'))};o(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),t&&t.addEventListener("change",e=>{e=e.target.checked?"dark":"light";localStorage.setItem("theme",e),o(e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);t&&(t=t.getBoundingClientRect().top+window.pageYOffset-20,window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,null,e))})}),document.querySelectorAll(".code-example pre").forEach((e,t)=>{var n=document.createElement("button");n.className="btn btn-sm btn-outline-primary copy-btn",n.innerHTML='<i class="bi bi-clipboard"></i> Copy',n.setAttribute("data-index",t),e.parentNode.insertBefore(n,e),n.addEventListener("click",function(){var e=this.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(e).then(()=>{let e=this.innerHTML;this.innerHTML='<i class="bi bi-check2"></i> Copied!',this.classList.remove("btn-outline-primary"),this.classList.add("btn-success"),setTimeout(()=>{this.innerHTML=e,this.classList.remove("btn-success"),this.classList.add("btn-outline-primary")},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})})});let e=document.querySelectorAll(".component-section"),t=document.querySelectorAll(".list-group-item");function n(){let n="";e.forEach(e=>{var t=e.offsetTop;window.pageYOffset>=t-100&&(n="#"+e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===n&&e.classList.add("active")})}n(),window.addEventListener("scroll",n)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),document.querySelectorAll('input[type="password"].validate-strength').forEach(n=>{n.addEventListener("input",()=>{var e=n.value,t=n.nextElementSibling;e.length<8?(n.setCustomValidity("Password must be at least 8 characters"),t&&(t.textContent="Password is too short (min 8 characters)")):/[A-Z]/.test(e)?/[0-9]/.test(e)?(n.setCustomValidity(""),t&&(t.textContent="Password strength: good")):(n.setCustomValidity("Password must contain at least one number"),t&&(t.textContent="Add at least one number")):(n.setCustomValidity("Password must contain at least one uppercase letter"),t&&(t.textContent="Add at least one uppercase letter"))})})}),console.log("Custom JavaScript loaded!"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),console.log("External song-detail.js loaded!"),(()=>{function e(){let r=document.getElementById("loading-container"),t=document.getElementById("error-container"),i=document.getElementById("song-container"),n=document.getElementById("error-message");var e=window.location.pathname.split("/");let o=e[e.length-1];console.log("Song ID from URL:",o),fetch("/api/song/"+o).then(e=>{if(console.log("API Response status:",e.status),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(e=>{if(console.log("Song data received:",e),e.error)throw new Error(e.error);document.getElementById("rank-number").textContent=e.rank||"N/A",document.getElementById("song-title").textContent=e.title||"Unknown Title",document.getElementById("channel-name").textContent=e.channel||"Unknown Channel",document.getElementById("song-views").textContent=e.views||"N/A",document.getElementById("song-duration").textContent=e.duration||"N/A",document.getElementById("song-followers").textContent=e.followers||"N/A",document.getElementById("views-large").textContent=e.views||"N/A",document.getElementById("duration-large").textContent=e.duration||"N/A",document.getElementById("followers-large").textContent=e.followers||"N/A",document.getElementById("song-full-title").textContent=e.title||"Unknown Title",document.getElementById("category-badge").textContent=e.category||"Music",e.channelUrl?(document.getElementById("channel-link").href=e.channelUrl,document.getElementById("channel-url-container").classList.remove("d-none")):document.getElementById("channel-url-container").classList.add("d-none");{var t=e.description;let o=document.getElementById("song-description"),r=document.getElementById("toggle-description");if(t){let n=(e=>e.replace(/https?:\/\/[^\s\n]+/g,function(e){return`<a href="${e}" target="_blank" class="text-primary text-decoration-none">${e} <i class="bi bi-box-arrow-up-right small"></i></a>`}).replace(/\n/g,"<br>"))(t);if(500<n.length){let e=n.substring(0,500)+"...",t=(o.innerHTML=e,r.classList.remove("d-none"),!1);r.onclick=function(){t?(o.innerHTML=e,r.innerHTML='<i class="bi bi-chevron-down me-1"></i>Show More'):(o.innerHTML=n,r.innerHTML='<i class="bi bi-chevron-up me-1"></i>Show Less'),t=!t}}else o.innerHTML=n}else document.getElementById("description-card").classList.add("d-none")}var t=e.tags,n=document.getElementById("song-tags"),o=(!t||0===(t=t.split(",").map(e=>e.trim()).filter(e=>e)).length?document.getElementById("tags-card").classList.add("d-none"):n.innerHTML=t.map(e=>`<span class="badge bg-light text-dark border">${e}</span>`).join(""),parseInt(e.rank)||1),n=document.getElementById("prev-song"),t=document.getElementById("next-song");1<o?n.onclick=()=>window.location.href="/song/"+(o-1):n.disabled=!0,o<100?t.onclick=()=>window.location.href="/song/"+(o+1):t.disabled=!0,document.title=`${e.title||"Unknown"} - ${e.channel||"Unknown"} | Song Details`,r.classList.add("d-none"),i.classList.remove("d-none")}).catch(e=>{console.error("Error loading song:",e),e=e.message||"Failed to load song details",r.classList.add("d-none"),n.textContent=e,t.classList.remove("d-none")})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("theme-demo-toggle");t&&(e=document.documentElement.getAttribute("data-bs-theme"),t.textContent="dark"===e?"Try Light Mode":"Try Dark Mode",t.addEventListener("click",function(){var e=document.documentElement,t="dark"===e.getAttribute("data-bs-theme")?"light":"dark";e.setAttribute("data-bs-theme",t),this.textContent="dark"==t?"Try Light Mode":"Try Dark Mode"}))}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("darkModeToggle"),n=document.documentElement;let o=e=>{"dark"===e?(n.setAttribute("data-bs-theme","dark"),t&&(t.checked=!0,t.nextElementSibling.innerHTML='<i class="bi bi-moon-fill"></i>')):(n.setAttribute("data-bs-theme","light"),t&&(t.checked=!1,t.nextElementSibling.innerHTML='<i class="bi bi-sun-fill"></i>'))};o(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),t&&t.addEventListener("change",e=>{e=e.target.checked?"dark":"light";localStorage.setItem("theme",e),o(e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);t&&(t=t.getBoundingClientRect().top+window.pageYOffset-20,window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,null,e))})}),document.querySelectorAll(".code-example pre").forEach((e,t)=>{var n=document.createElement("button");n.className="btn btn-sm btn-outline-primary copy-btn",n.innerHTML='<i class="bi bi-clipboard"></i> Copy',n.setAttribute("data-index",t),e.parentNode.insertBefore(n,e),n.addEventListener("click",function(){var e=this.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(e).then(()=>{let e=this.innerHTML;this.innerHTML='<i class="bi bi-check2"></i> Copied!',this.classList.remove("btn-outline-primary"),this.classList.add("btn-success"),setTimeout(()=>{this.innerHTML=e,this.classList.remove("btn-success"),this.classList.add("btn-outline-primary")},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})})});let e=document.querySelectorAll(".component-section"),t=document.querySelectorAll(".list-group-item");function n(){let n="";e.forEach(e=>{var t=e.offsetTop;window.pageYOffset>=t-100&&(n="#"+e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===n&&e.classList.add("active")})}n(),window.addEventListener("scroll",n)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),document.querySelectorAll('input[type="password"].validate-strength').forEach(n=>{n.addEventListener("input",()=>{var e=n.value,t=n.nextElementSibling;e.length<8?(n.setCustomValidity("Password must be at least 8 characters"),t&&(t.textContent="Password is too short (min 8 characters)")):/[A-Z]/.test(e)?/[0-9]/.test(e)?(n.setCustomValidity(""),t&&(t.textContent="Password strength: good")):(n.setCustomValidity("Password must contain at least one number"),t&&(t.textContent="Add at least one number")):(n.setCustomValidity("Password must contain at least one uppercase letter"),t&&(t.textContent="Add at least one uppercase letter"))})})}),console.log("Custom JavaScript loaded!"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),console.log("External song-detail.js loaded!"),(()=>{function e(){console.log("initializePage called");let r=document.getElementById("loading-container"),t=document.getElementById("error-container"),i=document.getElementById("song-container"),n=document.getElementById("error-message");console.log("DOM elements found:",{loadingContainer:!!r,errorContainer:!!t,songContainer:!!i,errorMessage:!!n});var e=window.location.pathname.split("/");let o=e[e.length-1];console.log("Song ID from URL:",o),console.log("Current URL:",window.location.pathname),console.log("loadSongDetails called with songId:",o),e="/api/song/"+o,console.log("Fetching from URL:",e),fetch(e).then(e=>{if(console.log("API Response status:",e.status),console.log("API Response ok:",e.ok),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(e=>{if(console.log("Song data received:",e),e.error)throw new Error(e.error);console.log("populateSongDetails called with:",e),console.log("Setting basic info..."),document.getElementById("rank-number").textContent=e.rank||"N/A",document.getElementById("song-title").textContent=e.title||"Unknown Title",document.getElementById("channel-name").textContent=e.channel||"Unknown Channel",document.getElementById("song-views").textContent=e.views||"N/A",document.getElementById("song-duration").textContent=e.duration||"N/A",document.getElementById("song-followers").textContent=e.followers||"N/A",console.log("Setting large stats..."),document.getElementById("views-large").textContent=e.views||"N/A",document.getElementById("duration-large").textContent=e.duration||"N/A",document.getElementById("followers-large").textContent=e.followers||"N/A",console.log("Setting detailed info..."),document.getElementById("song-full-title").textContent=e.title||"Unknown Title",document.getElementById("category-badge").textContent=e.category||"Music",e.channelUrl?(document.getElementById("channel-link").href=e.channelUrl,document.getElementById("channel-url-container").classList.remove("d-none")):document.getElementById("channel-url-container").classList.add("d-none");{var t=e.description;let o=document.getElementById("song-description"),r=document.getElementById("toggle-description");if(t){let n=(e=>e.replace(/https?:\/\/[^\s\n]+/g,function(e){return`<a href="${e}" target="_blank" class="text-primary text-decoration-none">${e} <i class="bi bi-box-arrow-up-right small"></i></a>`}).replace(/\n/g,"<br>"))(t);if(500<n.length){let e=n.substring(0,500)+"...",t=(o.innerHTML=e,r.classList.remove("d-none"),!1);r.onclick=function(){t?(o.innerHTML=e,r.innerHTML='<i class="bi bi-chevron-down me-1"></i>Show More'):(o.innerHTML=n,r.innerHTML='<i class="bi bi-chevron-up me-1"></i>Show Less'),t=!t}}else o.innerHTML=n}else document.getElementById("description-card").classList.add("d-none")}var t=e.tags,n=document.getElementById("song-tags"),o=(!t||0===(t=t.split(",").map(e=>e.trim()).filter(e=>e)).length?document.getElementById("tags-card").classList.add("d-none"):n.innerHTML=t.map(e=>`<span class="badge bg-light text-dark border">${e}</span>`).join(""),parseInt(e.rank)||1),n=document.getElementById("prev-song"),t=document.getElementById("next-song");1<o?n.onclick=()=>window.location.href="/song/"+(o-1):n.disabled=!0,o<100?t.onclick=()=>window.location.href="/song/"+(o+1):t.disabled=!0,document.title=`${e.title||"Unknown"} - ${e.channel||"Unknown"} | Song Details`,r.classList.add("d-none"),i.classList.remove("d-none")}).catch(e=>{console.error("Error loading song:",e),e=e.message||"Failed to load song details",r.classList.add("d-none"),n.textContent=e,t.classList.remove("d-none")})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("theme-demo-toggle");t&&(e=document.documentElement.getAttribute("data-bs-theme"),t.textContent="dark"===e?"Try Light Mode":"Try Dark Mode",t.addEventListener("click",function(){var e=document.documentElement,t="dark"===e.getAttribute("data-bs-theme")?"light":"dark";e.setAttribute("data-bs-theme",t),this.textContent="dark"==t?"Try Light Mode":"Try Dark Mode"}))}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("darkModeToggle"),n=document.documentElement;let o=e=>{"dark"===e?(n.setAttribute("data-bs-theme","dark"),t&&(t.checked=!0,t.nextElementSibling.innerHTML='<i class="bi bi-moon-fill"></i>')):(n.setAttribute("data-bs-theme","light"),t&&(t.checked=!1,t.nextElementSibling.innerHTML='<i class="bi bi-sun-fill"></i>'))};o(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),t&&t.addEventListener("change",e=>{e=e.target.checked?"dark":"light";localStorage.setItem("theme",e),o(e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);t&&(t=t.getBoundingClientRect().top+window.pageYOffset-20,window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,null,e))})}),document.querySelectorAll(".code-example pre").forEach((e,t)=>{var n=document.createElement("button");n.className="btn btn-sm btn-outline-primary copy-btn",n.innerHTML='<i class="bi bi-clipboard"></i> Copy',n.setAttribute("data-index",t),e.parentNode.insertBefore(n,e),n.addEventListener("click",function(){var e=this.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(e).then(()=>{let e=this.innerHTML;this.innerHTML='<i class="bi bi-check2"></i> Copied!',this.classList.remove("btn-outline-primary"),this.classList.add("btn-success"),setTimeout(()=>{this.innerHTML=e,this.classList.remove("btn-success"),this.classList.add("btn-outline-primary")},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})})});let e=document.querySelectorAll(".component-section"),t=document.querySelectorAll(".list-group-item");function n(){let n="";e.forEach(e=>{var t=e.offsetTop;window.pageYOffset>=t-100&&(n="#"+e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===n&&e.classList.add("active")})}n(),window.addEventListener("scroll",n)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),document.querySelectorAll('input[type="password"].validate-strength').forEach(n=>{n.addEventListener("input",()=>{var e=n.value,t=n.nextElementSibling;e.length<8?(n.setCustomValidity("Password must be at least 8 characters"),t&&(t.textContent="Password is too short (min 8 characters)")):/[A-Z]/.test(e)?/[0-9]/.test(e)?(n.setCustomValidity(""),t&&(t.textContent="Password strength: good")):(n.setCustomValidity("Password must contain at least one number"),t&&(t.textContent="Add at least one number")):(n.setCustomValidity("Password must contain at least one uppercase letter"),t&&(t.textContent="Add at least one uppercase letter"))})})}),console.log("Custom JavaScript loaded!"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),console.log("External song-detail.js loaded!"),(()=>{function e(){console.log("initializePage called");let r=document.getElementById("loading-container"),t=document.getElementById("error-container"),i=document.getElementById("song-container"),n=document.getElementById("error-message");console.log("DOM elements found:",{loadingContainer:!!r,errorContainer:!!t,songContainer:!!i,errorMessage:!!n});var e=window.location.pathname.split("/");let o=e[e.length-1];console.log("Song ID from URL:",o),console.log("Current URL:",window.location.pathname),console.log("loadSongDetails called with songId:",o),e="/api/song/"+o,console.log("Fetching from URL:",e),fetch(e).then(e=>{if(console.log("API Response status:",e.status),console.log("API Response ok:",e.ok),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(e=>{if(console.log("Song data received:",e),e.error)throw new Error(e.error);console.log("populateSongDetails called with:",e),console.log("Setting basic info..."),document.getElementById("rank-number").textContent=e.rank||"N/A",document.getElementById("song-title").textContent=e.title||"Unknown Title",document.getElementById("channel-name").textContent=e.channel||"Unknown Channel",document.getElementById("song-views").textContent=e.views||"N/A",document.getElementById("song-duration").textContent=e.duration||"N/A",document.getElementById("song-followers").textContent=e.followers||"N/A",console.log("Setting large stats..."),document.getElementById("views-large").textContent=e.views||"N/A",document.getElementById("duration-large").textContent=e.duration||"N/A",document.getElementById("followers-large").textContent=e.followers||"N/A",console.log("Setting detailed info..."),document.getElementById("song-full-title").textContent=e.title||"Unknown Title",document.getElementById("category-badge").textContent=e.category||"Music",e.channelUrl?(document.getElementById("channel-link").href=e.channelUrl,document.getElementById("channel-url-container").classList.remove("d-none")):document.getElementById("channel-url-container").classList.add("d-none");{var t=e.description;let o=document.getElementById("song-description"),r=document.getElementById("toggle-description");if(t){let n=(e=>e.replace(/https?:\/\/[^\s\n]+/g,function(e){return`<a href="${e}" target="_blank" class="text-primary text-decoration-none">${e} <i class="bi bi-box-arrow-up-right small"></i></a>`}).replace(/\n/g,"<br>"))(t);if(500<n.length){let e=n.substring(0,500)+"...",t=(o.innerHTML=e,r.classList.remove("d-none"),!1);r.onclick=function(){t?(o.innerHTML=e,r.innerHTML='<i class="bi bi-chevron-down me-1"></i>Show More'):(o.innerHTML=n,r.innerHTML='<i class="bi bi-chevron-up me-1"></i>Show Less'),t=!t}}else o.innerHTML=n}else document.getElementById("description-card").classList.add("d-none")}var t=e.tags,n=document.getElementById("song-tags"),o=(!t||0===(t=t.split(",").map(e=>e.trim()).filter(e=>e)).length?document.getElementById("tags-card").classList.add("d-none"):n.innerHTML=t.map(e=>`<span class="badge bg-light text-dark border">${e}</span>`).join(""),parseInt(e.rank)||1),n=document.getElementById("prev-song"),t=document.getElementById("next-song");1<o?n.onclick=()=>window.location.href="/song/"+(o-1):n.disabled=!0,o<100?t.onclick=()=>window.location.href="/song/"+(o+1):t.disabled=!0,document.title=`${e.title||"Unknown"} - ${e.channel||"Unknown"} | Song Details`,r.classList.add("d-none"),i.classList.remove("d-none")}).catch(e=>{console.error("Error loading song:",e),e=e.message||"Failed to load song details",r.classList.add("d-none"),n.textContent=e,t.classList.remove("d-none")})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("theme-demo-toggle");t&&(e=document.documentElement.getAttribute("data-bs-theme"),t.textContent="dark"===e?"Try Light Mode":"Try Dark Mode",t.addEventListener("click",function(){var e=document.documentElement,t="dark"===e.getAttribute("data-bs-theme")?"light":"dark";e.setAttribute("data-bs-theme",t),this.textContent="dark"==t?"Try Light Mode":"Try Dark Mode"}))}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("darkModeToggle"),n=document.documentElement;let o=e=>{"dark"===e?(n.setAttribute("data-bs-theme","dark"),t&&(t.checked=!0,t.nextElementSibling.innerHTML='<i class="bi bi-moon-fill"></i>')):(n.setAttribute("data-bs-theme","light"),t&&(t.checked=!1,t.nextElementSibling.innerHTML='<i class="bi bi-sun-fill"></i>'))};o(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),t&&t.addEventListener("change",e=>{e=e.target.checked?"dark":"light";localStorage.setItem("theme",e),o(e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);t&&(t=t.getBoundingClientRect().top+window.pageYOffset-20,window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,null,e))})}),document.querySelectorAll(".code-example pre").forEach((e,t)=>{var n=document.createElement("button");n.className="btn btn-sm btn-outline-primary copy-btn",n.innerHTML='<i class="bi bi-clipboard"></i> Copy',n.setAttribute("data-index",t),e.parentNode.insertBefore(n,e),n.addEventListener("click",function(){var e=this.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(e).then(()=>{let e=this.innerHTML;this.innerHTML='<i class="bi bi-check2"></i> Copied!',this.classList.remove("btn-outline-primary"),this.classList.add("btn-success"),setTimeout(()=>{this.innerHTML=e,this.classList.remove("btn-success"),this.classList.add("btn-outline-primary")},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})})});let e=document.querySelectorAll(".component-section"),t=document.querySelectorAll(".list-group-item");function n(){let n="";e.forEach(e=>{var t=e.offsetTop;window.pageYOffset>=t-100&&(n="#"+e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===n&&e.classList.add("active")})}n(),window.addEventListener("scroll",n)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),document.querySelectorAll('input[type="password"].validate-strength').forEach(n=>{n.addEventListener("input",()=>{var e=n.value,t=n.nextElementSibling;e.length<8?(n.setCustomValidity("Password must be at least 8 characters"),t&&(t.textContent="Password is too short (min 8 characters)")):/[A-Z]/.test(e)?/[0-9]/.test(e)?(n.setCustomValidity(""),t&&(t.textContent="Password strength: good")):(n.setCustomValidity("Password must contain at least one number"),t&&(t.textContent="Add at least one number")):(n.setCustomValidity("Password must contain at least one uppercase letter"),t&&(t.textContent="Add at least one uppercase letter"))})})}),console.log("Custom JavaScript loaded!"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),console.log("External song-detail.js loaded!"),(()=>{function e(){console.log("initializePage called");let r=document.getElementById("loading-container");var t=document.getElementById("error-container");let a=document.getElementById("song-container");var n=document.getElementById("error-message");if(r&&t&&a&&n){console.log("DOM elements found:",{loadingContainer:!!r,errorContainer:!!t,songContainer:!!a,errorMessage:!!n});t=window.location.pathname.split("/");let e=t[t.length-1];function s(e){console.log("showError called with:",e);var t=document.getElementById("loading-container"),n=document.getElementById("error-container"),o=document.getElementById("error-message");t&&n&&o?(t.classList.add("d-none"),o.textContent=e,n.classList.remove("d-none")):console.error("Error display elements not found, logging error only:",e)}console.log("Song ID from URL:",e),console.log("Current URL:",window.location.pathname),console.log("loadSongDetails called with songId:",e),n="/api/song/"+e,console.log("Fetching from URL:",n),fetch(n).then(e=>{if(console.log("API Response status:",e.status),console.log("API Response ok:",e.ok),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(t=>{if(console.log("Song data received:",t),t.error)throw new Error(t.error);console.log("populateSongDetails called with:",t);var i=["rank-number","song-title","channel-name","song-views","song-duration","song-followers","views-large","duration-large","followers-large","song-full-title","category-badge"].filter(e=>!document.getElementById(e));if(0<i.length)console.error("Missing required DOM elements:",i),s("Page structure is incomplete. Missing elements: "+i.join(", "));else{console.log("Setting basic info..."),document.getElementById("rank-number").textContent=t.rank||"N/A",document.getElementById("song-title").textContent=t.title||"Unknown Title",document.getElementById("channel-name").textContent=t.channel||"Unknown Channel",document.getElementById("song-views").textContent=t.views||"N/A",document.getElementById("song-duration").textContent=t.duration||"N/A",document.getElementById("song-followers").textContent=t.followers||"N/A",console.log("Setting large stats..."),document.getElementById("views-large").textContent=t.views||"N/A",document.getElementById("duration-large").textContent=t.duration||"N/A",document.getElementById("followers-large").textContent=t.followers||"N/A",console.log("Setting detailed info..."),document.getElementById("song-full-title").textContent=t.title||"Unknown Title",document.getElementById("category-badge").textContent=t.category||"Music",t.channelUrl?(document.getElementById("channel-link").href=t.channelUrl,document.getElementById("channel-url-container").classList.remove("d-none")):document.getElementById("channel-url-container").classList.add("d-none");{i=t.description;let o=document.getElementById("song-description"),r=document.getElementById("toggle-description"),e=document.getElementById("description-card");if(o&&e)if(i){let n=(e=>e.replace(/https?:\/\/[^\s\n]+/g,function(e){return`<a href="${e}" target="_blank" class="text-primary text-decoration-none">${e} <i class="bi bi-box-arrow-up-right small"></i></a>`}).replace(/\n/g,"<br>"))(i);if(500<n.length){let e=n.substring(0,500)+"...",t=(o.innerHTML=e,r.classList.remove("d-none"),!1);r.onclick=function(){t?(o.innerHTML=e,r.innerHTML='<i class="bi bi-chevron-down me-1"></i>Show More'):(o.innerHTML=n,r.innerHTML='<i class="bi bi-chevron-up me-1"></i>Show Less'),t=!t}}else o.innerHTML=n}else e.classList.add("d-none");else console.log("Description elements not found, skipping description rendering")}var i=t.tags,e=document.getElementById("song-tags"),n=document.getElementById("tags-card"),o=(e&&n?!i||0===(i=i.split(",").map(e=>e.trim()).filter(e=>e)).length?n.classList.add("d-none"):e.innerHTML=i.map(e=>`<span class="badge bg-light text-dark border">${e}</span>`).join(""):console.log("Tags elements not found, skipping tags rendering"),parseInt(t.rank)||1),n=document.getElementById("prev-song"),e=document.getElementById("next-song");n&&e?(1<o?n.onclick=()=>window.location.href="/song/"+(o-1):n.disabled=!0,o<100?e.onclick=()=>window.location.href="/song/"+(o+1):e.disabled=!0):console.log("Navigation elements not found, skipping navigation setup"),document.title=`${t.title||"Unknown"} - ${t.channel||"Unknown"} | Song Details`}r.classList.add("d-none"),a.classList.remove("d-none")}).catch(e=>{console.error("Error loading song:",e),s(e.message||"Failed to load song details")})}else console.log("Not a song detail page, skipping initialization")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("theme-demo-toggle");t&&(e=document.documentElement.getAttribute("data-bs-theme"),t.textContent="dark"===e?"Try Light Mode":"Try Dark Mode",t.addEventListener("click",function(){var e=document.documentElement,t="dark"===e.getAttribute("data-bs-theme")?"light":"dark";e.setAttribute("data-bs-theme",t),this.textContent="dark"==t?"Try Light Mode":"Try Dark Mode"}))}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("darkModeToggle"),n=document.documentElement;let o=e=>{"dark"===e?(n.setAttribute("data-bs-theme","dark"),t&&(t.checked=!0,t.nextElementSibling.innerHTML='<i class="bi bi-moon-fill"></i>')):(n.setAttribute("data-bs-theme","light"),t&&(t.checked=!1,t.nextElementSibling.innerHTML='<i class="bi bi-sun-fill"></i>'))};o(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),t&&t.addEventListener("change",e=>{e=e.target.checked?"dark":"light";localStorage.setItem("theme",e),o(e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);t&&(t=t.getBoundingClientRect().top+window.pageYOffset-20,window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,null,e))})}),document.querySelectorAll(".code-example pre").forEach((e,t)=>{var n=document.createElement("button");n.className="btn btn-sm btn-outline-primary copy-btn",n.innerHTML='<i class="bi bi-clipboard"></i> Copy',n.setAttribute("data-index",t),e.parentNode.insertBefore(n,e),n.addEventListener("click",function(){var e=this.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(e).then(()=>{let e=this.innerHTML;this.innerHTML='<i class="bi bi-check2"></i> Copied!',this.classList.remove("btn-outline-primary"),this.classList.add("btn-success"),setTimeout(()=>{this.innerHTML=e,this.classList.remove("btn-success"),this.classList.add("btn-outline-primary")},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})})});let e=document.querySelectorAll(".component-section"),t=document.querySelectorAll(".list-group-item");function n(){let n="";e.forEach(e=>{var t=e.offsetTop;window.pageYOffset>=t-100&&(n="#"+e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===n&&e.classList.add("active")})}n(),window.addEventListener("scroll",n)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),document.querySelectorAll('input[type="password"].validate-strength').forEach(n=>{n.addEventListener("input",()=>{var e=n.value,t=n.nextElementSibling;e.length<8?(n.setCustomValidity("Password must be at least 8 characters"),t&&(t.textContent="Password is too short (min 8 characters)")):/[A-Z]/.test(e)?/[0-9]/.test(e)?(n.setCustomValidity(""),t&&(t.textContent="Password strength: good")):(n.setCustomValidity("Password must contain at least one number"),t&&(t.textContent="Add at least one number")):(n.setCustomValidity("Password must contain at least one uppercase letter"),t&&(t.textContent="Add at least one uppercase letter"))})})}),console.log("Custom JavaScript loaded!"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),console.log("External song-detail.js loaded!"),(()=>{function e(){console.log("initializePage called");let r=document.getElementById("loading-container");var t=document.getElementById("error-container");let a=document.getElementById("song-container");var n=document.getElementById("error-message");if(r&&t&&a&&n){console.log("DOM elements found:",{loadingContainer:!!r,errorContainer:!!t,songContainer:!!a,errorMessage:!!n});t=window.location.pathname.split("/");let e=t[t.length-1];function s(e){console.log("showError called with:",e);var t=document.getElementById("loading-container"),n=document.getElementById("error-container"),o=document.getElementById("error-message");t&&n&&o?(t.classList.add("d-none"),o.textContent=e,n.classList.remove("d-none")):console.error("Error display elements not found, logging error only:",e)}console.log("Song ID from URL:",e),console.log("Current URL:",window.location.pathname),console.log("loadSongDetails called with songId:",e),n="/api/song/"+e,console.log("Fetching from URL:",n),fetch(n).then(e=>{if(console.log("API Response status:",e.status),console.log("API Response ok:",e.ok),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(t=>{if(console.log("Song data received:",t),t.error)throw new Error(t.error);console.log("populateSongDetails called with:",t);var i=["rank-number","song-title","channel-name","song-views","song-duration","song-followers","views-large","duration-large","followers-large","song-full-title","category-badge"].filter(e=>!document.getElementById(e));if(0<i.length)console.error("Missing required DOM elements:",i),s("Page structure is incomplete. Missing elements: "+i.join(", "));else{console.log("Setting basic info..."),document.getElementById("rank-number").textContent=t.rank||"N/A",document.getElementById("song-title").textContent=t.title||"Unknown Title",document.getElementById("channel-name").textContent=t.channel||"Unknown Channel",document.getElementById("song-views").textContent=t.views||"N/A",document.getElementById("song-duration").textContent=t.duration||"N/A",document.getElementById("song-followers").textContent=t.followers||"N/A",console.log("Setting large stats..."),document.getElementById("views-large").textContent=t.views||"N/A",document.getElementById("duration-large").textContent=t.duration||"N/A",document.getElementById("followers-large").textContent=t.followers||"N/A",console.log("Setting detailed info..."),document.getElementById("song-full-title").textContent=t.title||"Unknown Title",document.getElementById("category-badge").textContent=t.category||"Music",t.channelUrl?(document.getElementById("channel-link").href=t.channelUrl,document.getElementById("channel-url-container").classList.remove("d-none")):document.getElementById("channel-url-container").classList.add("d-none");{i=t.description;let o=document.getElementById("song-description"),r=document.getElementById("toggle-description"),e=document.getElementById("description-card");if(o&&e)if(i){let n=(e=>e.replace(/https?:\/\/[^\s\n]+/g,function(e){return`<a href="${e}" target="_blank" class="text-primary text-decoration-none">${e} <i class="bi bi-box-arrow-up-right small"></i></a>`}).replace(/\n/g,"<br>"))(i);if(500<n.length){let e=n.substring(0,500)+"...",t=(o.innerHTML=e,r.classList.remove("d-none"),!1);r.onclick=function(){t?(o.innerHTML=e,r.innerHTML='<i class="bi bi-chevron-down me-1"></i>Show More'):(o.innerHTML=n,r.innerHTML='<i class="bi bi-chevron-up me-1"></i>Show Less'),t=!t}}else o.innerHTML=n}else e.classList.add("d-none");else console.log("Description elements not found, skipping description rendering")}var i=t.tags,e=document.getElementById("song-tags"),n=document.getElementById("tags-card"),o=(e&&n?!i||0===(i=i.split(",").map(e=>e.trim()).filter(e=>e)).length?n.classList.add("d-none"):e.innerHTML=i.map(e=>`<span class="badge bg-light text-dark border">${e}</span>`).join(""):console.log("Tags elements not found, skipping tags rendering"),parseInt(t.rank)||1),n=document.getElementById("prev-song"),e=document.getElementById("next-song");n&&e?(1<o?n.onclick=()=>window.location.href="/song/"+(o-1):n.disabled=!0,o<100?e.onclick=()=>window.location.href="/song/"+(o+1):e.disabled=!0):console.log("Navigation elements not found, skipping navigation setup"),document.title=`${t.title||"Unknown"} - ${t.channel||"Unknown"} | Song Details`}r.classList.add("d-none"),a.classList.remove("d-none")}).catch(e=>{console.error("Error loading song:",e),s(e.message||"Failed to load song details")})}else console.log("Not a song detail page, skipping initialization")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})(),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("theme-demo-toggle");t&&(e=document.documentElement.getAttribute("data-bs-theme"),t.textContent="dark"===e?"Try Light Mode":"Try Dark Mode",t.addEventListener("click",function(){var e=document.documentElement,t="dark"===e.getAttribute("data-bs-theme")?"light":"dark";e.setAttribute("data-bs-theme",t),this.textContent="dark"==t?"Try Light Mode":"Try Dark Mode"}))}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("darkModeToggle"),n=document.documentElement;let o=e=>{"dark"===e?(n.setAttribute("data-bs-theme","dark"),t&&(t.checked=!0,t.nextElementSibling.innerHTML='<i class="bi bi-moon-fill"></i>')):(n.setAttribute("data-bs-theme","light"),t&&(t.checked=!1,t.nextElementSibling.innerHTML='<i class="bi bi-sun-fill"></i>'))};o(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),t&&t.addEventListener("change",e=>{e=e.target.checked?"dark":"light";localStorage.setItem("theme",e),o(e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=document.querySelector(e);t&&(t=t.getBoundingClientRect().top+window.pageYOffset-20,window.scrollTo({top:t,behavior:"smooth"}),history.pushState(null,null,e))})}),document.querySelectorAll(".code-example pre").forEach((e,t)=>{var n=document.createElement("button");n.className="btn btn-sm btn-outline-primary copy-btn",n.innerHTML='<i class="bi bi-clipboard"></i> Copy',n.setAttribute("data-index",t),e.parentNode.insertBefore(n,e),n.addEventListener("click",function(){var e=this.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(e).then(()=>{let e=this.innerHTML;this.innerHTML='<i class="bi bi-check2"></i> Copied!',this.classList.remove("btn-outline-primary"),this.classList.add("btn-success"),setTimeout(()=>{this.innerHTML=e,this.classList.remove("btn-success"),this.classList.add("btn-outline-primary")},2e3)}).catch(e=>{console.error("Failed to copy text: ",e)})})});let e=document.querySelectorAll(".component-section"),t=document.querySelectorAll(".list-group-item");function n(){let n="";e.forEach(e=>{var t=e.offsetTop;window.pageYOffset>=t-100&&(n="#"+e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===n&&e.classList.add("active")})}n(),window.addEventListener("scroll",n)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),document.querySelectorAll('input[type="password"].validate-strength').forEach(n=>{n.addEventListener("input",()=>{var e=n.value,t=n.nextElementSibling;e.length<8?(n.setCustomValidity("Password must be at least 8 characters"),t&&(t.textContent="Password is too short (min 8 characters)")):/[A-Z]/.test(e)?/[0-9]/.test(e)?(n.setCustomValidity(""),t&&(t.textContent="Password strength: good")):(n.setCustomValidity("Password must contain at least one number"),t&&(t.textContent="Add at least one number")):(n.setCustomValidity("Password must contain at least one uppercase letter"),t&&(t.textContent="Add at least one uppercase letter"))})})}),console.log("Custom JavaScript loaded!"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})});