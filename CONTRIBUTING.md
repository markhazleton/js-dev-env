# Contributing to js-dev-env

Thank you for your interest in contributing to the Bootstrap 5 + Express.js Starter Kit! This guide will help you understand the project structure and how to contribute effectively.

## üìö Table of Contents

- [Getting Started](#getting-started)
- [Project Architecture](#project-architecture)
- [Folder Structure](#folder-structure)
- [Development Workflow](#development-workflow)
- [Coding Standards](#coding-standards)
- [Testing](#testing)
- [Documentation](#documentation)
- [Pull Request Process](#pull-request-process)

## üöÄ Getting Started

### Prerequisites

- Node.js 18+ and npm 9+
- Git 2.28+
- Basic knowledge of Express.js, Bootstrap 5, and EJS

### Quick Setup

```bash
# Clone the repository
git clone https://github.com/markhazleton/js-dev-env.git
cd js-dev-env

# Install dependencies
npm install

# Start development server
npm run start:dev

# Open http://localhost:3000
```

For detailed setup instructions, see the [Quick Start Guide](/docs/developer-guide/quick-start.md).

## üèóÔ∏è Project Architecture

### Technology Stack

| Technology | Purpose | Version |
|------------|---------|---------|
| **Express.js** | Backend web framework | 5.1.0 |
| **Bootstrap** | CSS framework | 5.3.8 |
| **EJS** | Template engine | 3.1.10 |
| **SASS** | CSS preprocessor | 1.93.2 |
| **Jest** | Testing framework | 30.2.0 |

### Core Concepts

1. **JSON-Based CMS**: Content managed via `data/pages.json`
2. **Static Site Generation**: Builds to `/docs` for GitHub Pages
3. **Dual Output**: `/public` for dev, `/docs` for production
4. **Function-Based Tools**: Organized in `/tools` with clear separation
5. **Security First**: Helmet, rate limiting, input validation

## üìÅ Folder Structure

### Root Level Organization

```
js-dev-env/
‚îú‚îÄ‚îÄ üìÑ config/              # Application configuration
‚îú‚îÄ‚îÄ üìÑ copilot/             # AI session working documentation
‚îú‚îÄ‚îÄ üìÑ data/                # JSON-based content management
‚îú‚îÄ‚îÄ üìÑ docs/                # Built static site (GitHub Pages)
‚îÇ   ‚îú‚îÄ‚îÄ developer-guide/    # Developer documentation
‚îÇ   ‚îî‚îÄ‚îÄ project-info/       # Project history and decisions
‚îú‚îÄ‚îÄ üìÑ plugins/             # Plugin system
‚îú‚îÄ‚îÄ üìÑ public/              # Development static assets
‚îú‚îÄ‚îÄ üìÑ scss/                # SASS source files
‚îú‚îÄ‚îÄ üìÑ templates/           # Template generation system
‚îú‚îÄ‚îÄ üìÑ tests/               # Jest test suite
‚îú‚îÄ‚îÄ üìÑ tools/               # Development tools (organized by purpose)
‚îÇ   ‚îú‚îÄ‚îÄ build/              # Build system and orchestration
‚îÇ   ‚îú‚îÄ‚îÄ docs/               # Documentation tools
‚îÇ   ‚îú‚îÄ‚îÄ git/                # Git analysis tools
‚îÇ   ‚îú‚îÄ‚îÄ maintenance/        # Maintenance automation
‚îÇ   ‚îú‚îÄ‚îÄ seo/                # SEO and accessibility tools
‚îÇ   ‚îî‚îÄ‚îÄ setup/              # Project setup tools
‚îú‚îÄ‚îÄ üìÑ utils/               # Utility modules
‚îî‚îÄ‚îÄ üìÑ views/               # EJS templates
```

### Important Directories Explained

#### `/data/` - Content Management

JSON files that drive dynamic content. The primary file is `pages.json`.

**When to edit:**

- Adding new pages
- Updating content
- Managing navigation

#### `/docs/` - Production Output

**‚ö†Ô∏è NEVER EDIT DIRECTLY** - This folder is auto-generated by the build process.

Generated by: `npm run build`

#### `/public/` - Development Assets

Static assets used during development by the Express.js server.

**Contents:**

- `/css/` - Compiled CSS (from SASS)
- `/js/` - Client-side JavaScript
- `/fonts/` - Bootstrap Icons
- `/images/` - Image assets

#### `/scss/` - Styling Source

**‚úÖ ALWAYS EDIT HERE** - Never add inline styles to templates.

**Files:**

- `_variables.scss` - Bootstrap customization
- `_custom.scss` - Custom styles
- `_components-pages.scss` - Component-specific styles
- `main.scss` - Main entry point

#### `/tools/` - Development Tools

Function-based organization by purpose:

- **build/** - Build orchestration, compilation, asset processing
- **seo/** - SEO validation, accessibility checks, SSL monitoring
- **git/** - Repository metrics and activity analysis
- **maintenance/** - Automation and dependency management
- **setup/** - Interactive setup and configuration

#### `/views/` - Templates

EJS templates with partials for reusability.

**Structure:**

- `layout.ejs` - Main layout wrapper
- `page.ejs` - Generic page template
- `partials/` - Reusable components

#### `/copilot/` - AI Session Documentation

Working documentation from AI-assisted development sessions.

**Purpose:**

- Track architectural decisions
- Document problem-solving approaches
- Provide context for future work

See [copilot/README.md](/copilot/README.md) for details.

## üîß Development Workflow

### Daily Development

```bash
# Start development with hot reload
npm run start:dev

# In another terminal, run tests in watch mode
npm run test:watch

# Make changes to source files
# Changes auto-reload in browser
```

### Making Changes

1. **Content Changes** ‚Üí Edit `/data/pages.json`
2. **Style Changes** ‚Üí Edit `/scss/*.scss` files
3. **Template Changes** ‚Üí Edit `/views/*.ejs` files
4. **JavaScript Changes** ‚Üí Edit `/public/js/*.js` files
5. **Tool Changes** ‚Üí Edit `/tools/**/*.js` files

### Build Process

```bash
# Development build
npm run build:dev

# Production build (clears and rebuilds everything)
npm run build

# Specific builds
npm run build:scss    # SCSS only
npm run build:pug     # Templates only
```

**Important**: All builds automatically clear generated files before rebuilding.

See [Build Process Guide](/docs/developer-guide/build-process.md) for details.

## üé® Coding Standards

### JavaScript

- Use ES6+ syntax
- Prefer `const` over `let`, avoid `var`
- Use arrow functions for callbacks
- Async/await over promises
- Descriptive variable names

```javascript
// Good
const fetchUserData = async (userId) => {
  try {
    const response = await fetch(`/api/users/${userId}`);
    return await response.json();
  } catch (error) {
    console.error('Failed to fetch user:', error);
    throw error;
  }
};

// Avoid
var getUserData = function(id) {
  return fetch('/api/users/' + id).then(function(res) {
    return res.json();
  });
};
```

### SASS/CSS

- Use Bootstrap variables and mixins
- Follow BEM methodology for custom classes
- **NEVER use inline styles in templates**
- Organize by component/page

```scss
// Good - in _custom.scss
.component {
  &__element {
    @include border-radius($border-radius);
    color: $primary;
  }

  &--modifier {
    background: $secondary;
  }
}

// Avoid - in templates
<div style="color: blue;">...</div>
```

### EJS Templates

- Use semantic HTML5 elements
- Include ARIA attributes for accessibility
- No inline styles or `<style>` tags
- Use Bootstrap classes for styling

```html
<!-- Good -->
<main class="container-fluid">
  <section class="row">
    <article class="col-md-8">
      <%- include('partials/component', { data: locals.data }) %>
    </article>
  </section>
</main>

<!-- Avoid -->
<div style="padding: 20px;">
  <div style="color: red;">Content</div>
</div>
```

### File Organization

- One component per file when possible
- Clear, descriptive file names
- Keep related files together
- Use subdirectories for organization

## üß™ Testing

### Running Tests

```bash
# Run all tests
npm test

# Watch mode
npm run test:watch

# Coverage report
npm run test:coverage

# CI mode
npm run test:ci
```

### Writing Tests

- Test files in `/tests/` directory
- Name: `*.test.js`
- Use descriptive test names
- Follow arrange-act-assert pattern
- Mock external dependencies

```javascript
describe('API Endpoints', () => {
  it('should return 200 for GET /api/health', async () => {
    // Arrange
    const request = supertest(app);

    // Act
    const response = await request.get('/api/health');

    // Assert
    expect(response.status).toBe(200);
    expect(response.body.status).toBe('ok');
  });
});
```

### Coverage Goals

- Aim for >80% code coverage
- All utility functions should be tested
- All API endpoints should be tested
- Critical paths must have tests

## üìù Documentation

### Types of Documentation

1. **Code Comments** - Explain complex logic
2. **JSDoc Comments** - Document functions and modules
3. **README Files** - High-level overviews
4. **Guide Documents** - In-depth how-to guides

### Documentation Locations

- **User-facing** ‚Üí `/docs/` (published site)
- **Developer guides** ‚Üí `/docs/developer-guide/`
- **Project history** ‚Üí `/docs/project-info/`
- **Working docs** ‚Üí `/copilot/session-{date}/`
- **API docs** ‚Üí Code comments + JSDoc

### Writing Documentation

- Use clear, concise language
- Include code examples
- Add visual diagrams when helpful
- Keep it up to date
- Use proper markdown formatting

## üîÑ Pull Request Process

### Before Submitting

1. **Test your changes**: `npm test`
2. **Lint your code**: `npm run lint`
3. **Build successfully**: `npm run build`
4. **Update documentation** if needed
5. **Add tests** for new features
6. **Follow commit conventions**

### Commit Message Format

```
type(scope): brief description

Longer description if needed.

Fixes #123
```

**Types:**

- `feat:` New feature
- `fix:` Bug fix
- `docs:` Documentation
- `style:` Formatting
- `refactor:` Code restructuring
- `test:` Adding tests
- `chore:` Maintenance

**Examples:**

```
feat(api): add user authentication endpoint

fix(build): correct SASS compilation path

docs(readme): update installation instructions
```

### PR Guidelines

1. **One feature per PR** - Keep changes focused
2. **Clear description** - Explain what and why
3. **Reference issues** - Link related issues
4. **Request review** - Tag maintainers
5. **Be responsive** - Address feedback promptly

### PR Template

```markdown
## Description
Brief description of changes

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
- [ ] Tests pass locally
- [ ] Added new tests
- [ ] Manual testing completed

## Checklist
- [ ] Code follows style guidelines
- [ ] Documentation updated
- [ ] No console errors
- [ ] Build succeeds
```

## üêõ Reporting Issues

### Bug Reports

Include:

- Clear description
- Steps to reproduce
- Expected vs actual behavior
- Environment (OS, Node version, browser)
- Screenshots if applicable

### Feature Requests

Include:

- Clear use case
- Proposed solution
- Alternative approaches
- Willing to implement?

## üéØ Good First Issues

Look for issues labeled:

- `good first issue`
- `beginner-friendly`
- `documentation`
- `help wanted`

These are great entry points for new contributors!

## üìö Additional Resources

- **[Developer Guide](/docs/developer-guide/)** - Comprehensive developer documentation
- **[Project Info](/docs/project-info/)** - Project history and decisions
- **[Main README](/README.md)** - Project overview
- **[Security Policy](/SECURITY.md)** - Security guidelines

## ü§ù Code of Conduct

- Be respectful and inclusive
- Welcome newcomers
- Focus on constructive feedback
- Collaborate openly
- Maintain a positive environment

## üí¨ Getting Help

- **GitHub Issues** - Bug reports and feature requests
- **GitHub Discussions** - Questions and ideas
- **Documentation** - Check guides first
- **Code Comments** - In-line documentation

## üåü Recognition

Contributors are recognized in:

- GitHub contributors page
- Release notes
- Project documentation

Thank you for contributing to js-dev-env! üöÄ

---

**Questions?** Open a discussion or issue - we're here to help!
